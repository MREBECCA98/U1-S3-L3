<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>to do list</title>
    <style>
      .deleted {
        text-decoration: line-through;
        color: rgb(20, 20, 20);
      }
      .buttonx {
        background-color: red;
      }
    </style>
  </head>

  <body>
    <h1>TO-DO LIST</h1>
    <div>
      <input id="aggiungiObiettivi" type="text" placeholder="i miei obiettivi" />
      <!-- creo la mia "barra di ricerca"-->
      <button id="btn1">CLICCA QUI</button
      ><!-- creo il bottone che mi dovrà far uscire il testo come checkbox-->
      <ul id="testoObiettivi">
        <!--creo dove andrà a finire il testo -->
      </ul>
    </div>
  </body>

  <script>
    const input = document.getElementById("aggiungiObiettivi"); // variabile collegata all'id input
    console.dir(input);
    const btn1 = document.getElementById("btn1"); //variabile collegata all id bottone
    console.dir(btn1);
    const list = document.getElementById("testoObiettivi"); // variabile collegata all id lista(ul)
    console.dir(list);

    btn1.addEventListener("click", function () //nuovo evento (addEvenListener) associato a clcik (bottone)
    {
      const valore = input.value; //creo la variabile (il mio input.value) dove salvo il testo scritto
      if (valore !== "") {
        //se valore è diverso da "" allora..
        const li = document.createElement("li");
        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        const span = document.createElement("span"); //span(ovunque)
        span.textContent = valore; //metto il testo all'interno del valore

        checkbox.addEventListener("change", function () {
          //nuovo evento associato a checkbox(change)
          console.log(checkbox.checked);

          if (checkbox.checked) {
            span.classList.add("deleted"); //se la mia checkbox è spuntata allora (---)
          } else {
            span.classList.remove("deleted");
          }
        });
        const deleteBtn = document.createElement("button"); //creo il mio "bottone"
        deleteBtn.textContent = "x"; //contenuto
        deleteBtn.classList.add("buttonx"); //css

        deleteBtn.addEventListener("click", () =>
          //creo l'evento da eseguire
          {
            li.remove(); //rimuovere dal momento in cui fai "click" l'li
          }
        );
        li.appendChild(span); //li>testo(span)
        li.appendChild(checkbox); //li>
        li.appendChild(deleteBtn); //cancella i li
        list.appendChild(li); //ul>li
        input.value = "";
      }
    });
  </script>
</html>
